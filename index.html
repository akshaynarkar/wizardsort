<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wizard Eye & Fortune Manager</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

    <div class="app-container">
        <nav class="sidebar">
            <div class="brand">WizardEye<span class="lite">.Fortune</span></div>
            <ul class="nav-links">
                <li class="active" onclick="switchTool('wizard-eye')">üëÅÔ∏è Wizard Eye</li>
                <li onclick="switchTool('fortune-manager')">üí∞ Fortune Manager</li>
            </ul>
        </nav>

        <main class="content">
            
            <div id="wizard-eye" class="tool-section">
                <header class="tool-header">
                    <h2>Wizard Eye <span class="subtitle">Deep Fundamental X-Ray</span></h2>
                    <input type="text" placeholder="Enter Ticker (e.g., AAPL)..." class="search-bar">
                </header>

                <div class="data-grid">
                    <div class="card">
                        <h3>1. Fundamental Ratios</h3>
                        <table class="metric-table">
                            <thead><tr><th>Metric</th><th>Value</th><th>vs Sector</th></tr></thead>
                            <tbody>
                                <tr><td>P/E Ratio</td><td class="num">24.5</td><td class="bad">+5%</td></tr>
                                <tr><td>ROIC</td><td class="num">18.2%</td><td class="good">+12%</td></tr>
                                <tr><td>Debt/Equity</td><td class="num">0.45</td><td class="good">-10%</td></tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="card">
                        <h3>2. Cash Flows (TTM)</h3>
                        <div class="cf-row"><span>Operating Cash Flow</span> <span class="val">$102B</span></div>
                        <div class="cf-row"><span>CapEx</span> <span class="val neg">($12B)</span></div>
                        <div class="cf-row highlight"><span>Free Cash Flow</span> <span class="val">$90B</span></div>
                    </div>

                    <div class="card">
                        <h3>3. Analyst Ratings</h3>
                        <div class="rating-meter">
                            <div class="bar-container">
                                <div class="bar buy" style="width: 60%">Buy (60%)</div>
                                <div class="bar hold" style="width: 30%">Hold (30%)</div>
                                <div class="bar sell" style="width: 10%">Sell</div>
                            </div>
                            <p class="consensus">Consensus: <strong>Outperform</strong></p>
                        </div>
                    </div>
                </div>
            </div>

            <div id="fortune-manager" class="tool-section hidden">
                <header class="tool-header">
                    <h2>Fortune Manager <span class="subtitle">Kelly Criterion Allocation</span></h2>
                </header>

                <div class="kelly-interface">
                    <div class="controls-panel">
                        <div class="input-group">
                            <label>Tickers (comma separated)</label>
                            <input type="text" id="kelly-tickers" value="AAPL, MSFT, GOOGL">
                        </div>
                        <div class="input-group">
                            <label>Total Cash ($)</label>
                            <input type="number" id="kelly-cash" value="100000">
                        </div>
                        <div class="input-group">
                            <label>Backtest Range (For Win/Loss Calc)</label>
                            <input type="date" value="2020-01-01"> to <input type="date" value="2023-12-31">
                        </div>
                        <div class="kelly-options">
                            <label>Kelly Aggression:</label>
                            <div class="radio-group">
                                <label><input type="radio" name="kelly" value="1" checked> Full Kelly (Aggressive)</label>
                                <label><input type="radio" name="kelly" value="0.5"> Half Kelly (Balanced)</label>
                                <label><input type="radio" name="kelly" value="0.25"> Quarter Kelly (Safe)</label>
                            </div>
                        </div>
                        <button class="action-btn" onclick="calculateKelly()">Run Allocation</button>
                    </div>

                    <div class="results-panel hidden" id="kelly-results">
                        
                        <div class="chart-container">
                            <canvas id="allocationPie"></canvas>
                        </div>

                        <table class="kelly-table">
                            <thead>
                                <tr>
                                    <th onclick="sortTable(0)">Ticker ‚¨ç</th>
                                    <th>Win Rate (P)</th>
                                    <th>Win/Loss (R)</th>
                                    <th>Kelly %</th>
                                    <th>Cash Alloc ($)</th>
                                    <th>Rationale</th>
                                </tr>
                            </thead>
                            <tbody id="kelly-table-body">
                                </tbody>
                        </table>

                        <div id="trend-detail" class="trend-modal hidden">
                            <h3>Trend Analysis: <span id="trend-ticker"></span></h3>
                            <p class="explanation">Green lines indicate winning trades, Red indicate losses during backtest period.</p>
                            <canvas id="trendChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

        </main>
    </div>
    <script src="script.js"></script>
</body>
</html>
